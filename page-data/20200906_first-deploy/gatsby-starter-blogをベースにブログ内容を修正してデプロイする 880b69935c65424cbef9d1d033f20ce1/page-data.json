{"componentChunkName":"component---src-templates-blog-post-js","path":"/20200906_first-deploy/gatsby-starter-blogをベースにブログ内容を修正してデプロイする 880b69935c65424cbef9d1d033f20ce1/","result":{"data":{"site":{"siteMetadata":{"title":"amaNekublog"}},"markdownRemark":{"id":"5bb7a584-4ca8-5ef0-ae7f-ca12118b4b7f","excerpt":"gatsby-starter-blogをベースにブログ内容を修正してデプロイする Created: 2020/08/31\nTags: GatsbyJS\nUpdated: 2020/09/06 今回は、GatsbyJSでブログを始めようと決めてから、デプロイするまでに行ったことを解説します。GatsbyJS…","html":"<h1>gatsby-starter-blogをベースにブログ内容を修正してデプロイする</h1>\n<p>Created: 2020/08/31\nTags: GatsbyJS\nUpdated: 2020/09/06</p>\n<p>今回は、GatsbyJSでブログを始めようと決めてから、デプロイするまでに行ったことを解説します。GatsbyJSのインストールとgatsby-starter-blogを使ったGatsbyJSプロジェクトの作成までは済んでいる前提です。変更内容は、ブログの内容やプロフィールが主になります。</p>\n<h1>1.現状の理解</h1>\n<hr>\n<h2>1-1.イメージ</h2>\n<p>gatsby-starter-blogそのままだと、こんな状態です。これから自分用の内容に置き換えていきます。</p>\n<p><img src=\"gatsby-starter-blog%E3%82%92%E3%83%98%E3%82%99%E3%83%BC%E3%82%B9%E3%81%AB%E3%83%95%E3%82%99%E3%83%AD%E3%82%AF%E3%82%99%E5%86%85%E5%AE%B9%E3%82%92%E4%BF%AE%E6%AD%A3%E3%81%97%E3%81%A6%E3%83%86%E3%82%99%E3%83%95%E3%82%9A%E3%83%AD%E3%82%A4%E3%81%99%E3%82%8B%20880b69935c65424cbef9d1d033f20ce1/Untitled.png\" alt=\"gatsby-starter-blog%E3%82%92%E3%83%98%E3%82%99%E3%83%BC%E3%82%B9%E3%81%AB%E3%83%95%E3%82%99%E3%83%AD%E3%82%AF%E3%82%99%E5%86%85%E5%AE%B9%E3%82%92%E4%BF%AE%E6%AD%A3%E3%81%97%E3%81%A6%E3%83%86%E3%82%99%E3%83%95%E3%82%9A%E3%83%AD%E3%82%A4%E3%81%99%E3%82%8B%20880b69935c65424cbef9d1d033f20ce1/Untitled.png\"></p>\n<p>※デモサイト</p>\n<p><a href=\"https://gatsby-starter-blog-demo.netlify.app/\"></a></p>\n<h2>1-2.フォルダ構成を知る</h2>\n<p>変更するにはまず、どこに何があるのかを知る必要があります。</p>\n<p>※❔が付いている部分はまだ詳しく理解できていないです>&#x3C;</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">root\n|-- /content          #記事用\n    |-- /assets         #記事共通で使う素材\n    |-- /blog           #記事本体。記事個別で使う素材もここ\n|-- /node_modules     #使用nodeモジュール\n|-- /public           #ビルドでできる。公開用\n|-- /src              #ソースコード\n    |-- /components     #任意。ページ共通で使うコンポーネント。\n    |-- /pages          #必須。ここにあるファイルが自動的にページになる。フォルダ名がそのページへのパスになる。\n    |-- /templates      #❔ブログポストのテンプレを配置。GraphqlでContentsから動的に記事を作成(注入？)できる。\n    |-- /utils          #ユーティリティ\n|-- /static           #処理せずそのまま配置したいファイル類。favicon.icoとか\n|-- gatsby-config.js  #設定のメインファイル。サイトのメタデータや使用するプラグイン\n|-- gatsby-node.js    #❔nodeAPI（記事を生成する側のファイル）に対して影響を与える設定類\n|-- gatsby-ssr.js     #❔ServerSideRenderingAPIに対して影響を与える設定類\n|-- gatsby-browser.js #❔browserAPI（ブラウザで表示する側のファイル）に対して影響を与える設定類</code></pre></div>\n<p>詳細：</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">content                 #記事用\n|-- /assets               #記事共通で使う素材\n    |-- gatby-icon.png      #サイトのfavicon用\n    |-- profile-pic.png     #プロフィール画像\n|-- /blog                 #記事本体。記事個別で使う素材もここ\n    |-- /hello-wolrd\n        |-- index.md\n        |-- salty_egg.jpg\n    |-- ...</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">src                      #ソースコード\n|-- /components            #ページ共通で使うコンポーネント。\n    |-- bio.js               #biography=自己紹介。\n    |-- layout.js            #❔サイト全体のレイアウト。header、main、footer。\n    |-- seo.js               #❔SEOに必要なもの（そもそもSEOをよくわかってない）\n|-- /pages                 #必須。ここにあるファイルが自動的にページになる。フォルダ名がそのページへのパスになる。\n    |-- 404.js               #404のページ\n    |-- index.js             #ホームページ\n    |-- using-typescript.tsx #❔typescriptを使うために必要なファイルらしい。使わないなら消していいらしい\n|-- /templates             #ブログポストのテンプレを配置。GraphqlでContentsから動的に記事を作成(注入？)できる。\n    |-- blog-post.js         #記事ページのベースとなるページ（多分）\n|-- /utils                 #ユーティリティ\n    |-- typography.js        #❔typographyで使う設定</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">statics\n|-- favicon.ico   #ブラウザのタブ部分に出てくる画像\n|-- robots.txt    #❔robots.txt（って何やろ...？）</code></pre></div>\n<p>参考：</p>\n<p><a href=\"https://www.gatsbyjs.com/docs/gatsby-project-structure/\">Gatsby Project Structure</a></p>\n<p><a href=\"https://suzukalight.com/2019-07-01-file-structure/\">Gatsby のファイル構成 | suzukalight.com</a></p>\n<h1>2.変更箇所を列挙する</h1>\n<hr>\n<ul>\n<li>サイトのメタデータ（作成者名とか）</li>\n<li>プロフィール画像</li>\n<li>favicon</li>\n<li>記事</li>\n<li>日付をYYYY.MM.DD形式に</li>\n<li>コピーライト</li>\n<li>プロフィールの細かいところ</li>\n</ul>\n<p>これだけ！</p>\n<h1>3.必要な変更箇所を変更する</h1>\n<hr>\n<h2>3-1.サイトのメタデータ（作成者名とか）</h2>\n<p>/gatsby-config.jsを変更します。</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  siteMetadata<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    title<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">amaNekublog</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n    author<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      name<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">ネク</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n      summary<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">個人ゲーム開発を夢見るITエンジニア。ドット絵・イラスト・デザインにも挑戦したいと思っている。</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    description<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">ゲーム・プログラミング・ドット絵・イラスト・デザインを中心にお役立ち情報から個人的な考えまで”あまねく”発信します。</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n    siteUrl<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">https://nekumiyama.com/</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n    social<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      twitter<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">nekumiyama</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n<h2>3-2.プロフィール画像</h2>\n<ul>\n<li>/contents/assets内のprofile-pic.jpgを変更します。</li>\n<li>※ファイル名を変えたい場合は/src/components/bio.jsの以下を変更しましょう。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">avatar<span class=\"token operator\">:</span> <span class=\"token function\">file</span><span class=\"token punctuation\">(</span>absolutePath<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> regex<span class=\"token operator\">:</span> <span class=\"token string\">\"/avater.png/\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></code></pre></div>\n<h2>3-3.favicon</h2>\n<ul>\n<li>今回はプロフィール画像を再利用します。</li>\n<li>/gatsby-config.jsを編集します。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token punctuation\">{</span>\n  resolve<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-plugin-manifest</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n  options<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    name<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">amaNekublog | ネクのブログ</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>  <span class=\"token comment\">//☆ついでに変更</span>\n    short_name<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">amaNekublog</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>          <span class=\"token comment\">//☆ついでに変更</span>\n    start_url<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n    background_color<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">#ffffff</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n    theme_color<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">#663399</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n    display<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">minimal-ui</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n    icon<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">content/assets/avater.png</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>   <span class=\"token comment\">//★ここ</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p>※/static内のfavicon.icoは変更しなくてよい（引っ掛かるところだった😅）</p>\n<h2>3-4.記事</h2>\n<ul>\n<li>/blog内の/hello-worldフォルダ以外を削除します。</li>\n<li>/hello-worldをリネームします。⇒先頭に公開日を付与して日付順に並ばせる狙い</li>\n<li>/hello-worldの記事内容を更新します。</li>\n</ul>\n<h2>3-5.日付をYYYY.MM.DD形式に</h2>\n<ul>\n<li>/src/pages/index.jsを変更します。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> pageQuery <span class=\"token operator\">=</span> graphql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n  query {\n    site {\n      siteMetadata {\n        title\n      }\n    }\n    allMarkdownRemark(sort: { fields: [frontmatter___date], order: DESC }) {\n      edges {\n        node {\n          excerpt\n          fields {\n            slug\n          }\n          frontmatter {\n            date(formatString: \"YYYY.MM.DD\")  //★ここ\n            title\n            description\n          }\n        }\n      }\n    }\n  }\n</span><span class=\"token template-punctuation string\">`</span></span></code></pre></div>\n<ul>\n<li>/src/templates/blog-post.jsを変更します。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> pageQuery <span class=\"token operator\">=</span> graphql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n  query BlogPostBySlug($slug: String!) {\n    site {\n      siteMetadata {\n        title\n      }\n    }\n    markdownRemark(fields: { slug: { eq: $slug } }) {\n      id\n      excerpt(pruneLength: 160)\n      html\n      frontmatter {\n        title\n        date(formatString: \"YYYY.MM.DD\")  //★ここ\n        description\n      }\n    }\n  }\n</span><span class=\"token template-punctuation string\">`</span></span></code></pre></div>\n<h2>3-6.コピーライト</h2>\n<p>/src/components/layout.jsを変更します。</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>footer</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    Â© </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getFullYear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">, Neku Miyama\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>footer</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>参考：（そもそもコピーライトの書き方がわからなかったため参考にしました）</p>\n<p><a href=\"https://deco8.net/web/footer-copyright-html-tag/\">【保存版】もう迷わない！フッターに表記するコピーライトの正しい書き方とタグ【HTML5・PHP・JavaScript】</a></p>\n<h2>3-7.プロフィールの細かいところ</h2>\n<ul>\n<li>「Written by ネク」→単純に「ネク」にして、改行したい</li>\n<li>「You should follow him on Twitter」→改行して「Twitter」にしたい</li>\n</ul>\n<p>/src/components/bio.jsを変更します。</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>strong</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>author<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>strong</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>author<span class=\"token punctuation\">.</span>summary<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">https://twitter.com/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>social<span class=\"token punctuation\">.</span>twitter<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Twitter</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h2>3-8.完成！</h2>\n<p>和文のせいか見た目がよくないですが、、、ブログ内容は自分のものになりました！</p>\n<p><img src=\"gatsby-starter-blog%E3%82%92%E3%83%98%E3%82%99%E3%83%BC%E3%82%B9%E3%81%AB%E3%83%95%E3%82%99%E3%83%AD%E3%82%AF%E3%82%99%E5%86%85%E5%AE%B9%E3%82%92%E4%BF%AE%E6%AD%A3%E3%81%97%E3%81%A6%E3%83%86%E3%82%99%E3%83%95%E3%82%9A%E3%83%AD%E3%82%A4%E3%81%99%E3%82%8B%20880b69935c65424cbef9d1d033f20ce1/Untitled%201.png\" alt=\"gatsby-starter-blog%E3%82%92%E3%83%98%E3%82%99%E3%83%BC%E3%82%B9%E3%81%AB%E3%83%95%E3%82%99%E3%83%AD%E3%82%AF%E3%82%99%E5%86%85%E5%AE%B9%E3%82%92%E4%BF%AE%E6%AD%A3%E3%81%97%E3%81%A6%E3%83%86%E3%82%99%E3%83%95%E3%82%9A%E3%83%AD%E3%82%A4%E3%81%99%E3%82%8B%20880b69935c65424cbef9d1d033f20ce1/Untitled%201.png\"></p>\n<p><img src=\"gatsby-starter-blog%E3%82%92%E3%83%98%E3%82%99%E3%83%BC%E3%82%B9%E3%81%AB%E3%83%95%E3%82%99%E3%83%AD%E3%82%AF%E3%82%99%E5%86%85%E5%AE%B9%E3%82%92%E4%BF%AE%E6%AD%A3%E3%81%97%E3%81%A6%E3%83%86%E3%82%99%E3%83%95%E3%82%9A%E3%83%AD%E3%82%A4%E3%81%99%E3%82%8B%20880b69935c65424cbef9d1d033f20ce1/Untitled%202.png\" alt=\"gatsby-starter-blog%E3%82%92%E3%83%98%E3%82%99%E3%83%BC%E3%82%B9%E3%81%AB%E3%83%95%E3%82%99%E3%83%AD%E3%82%AF%E3%82%99%E5%86%85%E5%AE%B9%E3%82%92%E4%BF%AE%E6%AD%A3%E3%81%97%E3%81%A6%E3%83%86%E3%82%99%E3%83%95%E3%82%9A%E3%83%AD%E3%82%A4%E3%81%99%E3%82%8B%20880b69935c65424cbef9d1d033f20ce1/Untitled%202.png\"></p>\n<h1>4.デプロイする</h1>\n<hr>\n<p>以下のGatsbyJSの公式ページにGitHub Pagesへのデプロイ方法が説明されているので、これを参考にGitHub Pagesにデプロイしてみます。（なんと無料🤑）</p>\n<p><a href=\"https://www.gatsbyjs.com/docs/how-gatsby-works-with-github-pages/\">How Gatsby Works with GitHub Pages</a></p>\n<h3>手順</h3>\n<ol>\n<li>ローカルで<code class=\"language-text\">git commit</code>しておく</li>\n<li>GitHubにリポジトリを作成</li>\n<li><code class=\"language-text\">git merge --allow-unrelated-histories origin/master</code> をして強制的に？マージ</li>\n<li><code class=\"language-text\">git push -u origin master</code> でGitHubにpush</li>\n<li>参考サイトの手順でデプロイ用の設定を実施</li>\n<li><code class=\"language-text\">npm run deploy</code> すればデプロイ完了🚀</li>\n</ol>\n<p>※<code class=\"language-text\">npm run deploy</code>  で「fatal: A branch named ‘gh-pages’ already exists.」と出たら…\n　node_modules/.cache/gh-pagesを削除する。</p>\n<p>以上です！　次回はブログの「テキスト装飾」を変える方法を解説します！</p>","frontmatter":{"title":"","date":null,"description":null}}},"pageContext":{"slug":"/20200906_first-deploy/gatsby-starter-blogをベースにブログ内容を修正してデプロイする 880b69935c65424cbef9d1d033f20ce1/","previous":{"fields":{"slug":"/20200904_hello-world/"},"frontmatter":{"title":"ブログ、始めました。"}},"next":null}},"staticQueryHashes":["1317458740","2841359383"]}